<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JordanWearStore - Gerenciador com M√∫ltiplas Imagens</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #000 0%, #333 100%);
            color: white;
            padding: 25px 0;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            text-align: center;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 32px;
        }
        
        /* CONTROLES */
        .simple-controls {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .action-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 15px;
            min-width: 180px;
        }
        
        .action-btn.export {
            background: #4CAF50;
            color: white;
        }
        
        .action-btn.export:hover {
            background: #45a049;
        }
        
        .action-btn.add {
            background: #2196F3;
            color: white;
        }
        
        .action-btn.add:hover {
            background: #0b7dda;
        }
        
        .action-btn.load {
            background: #FF9800;
            color: white;
        }
        
        .action-btn.load:hover {
            background: #e68900;
        }
        
        .action-btn.copy {
            background: #9C27B0;
            color: white;
        }
        
        .action-btn.copy:hover {
            background: #7b1fa2;
        }
        
        /* DASHBOARD */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .stat-card h3 {
            color: #666;
            font-size: 16px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #000;
        }
        
        /* FORMUL√ÅRIO ADICIONAR PRODUTO */
        .add-product-form {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            display: none;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        /* GERENCIADOR DE IMAGENS */
        .images-manager {
            background: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .images-manager h4 {
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .images-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .image-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 120px;
        }
        
        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-item .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(231, 76, 60, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .add-image-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }
        
        .image-url-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .image-url-input input {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
        }
        
        .image-url-input button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
        }
        
        /* TABELA DE PRODUTOS */
        .products-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 40px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead {
            background: #000;
            color: white;
        }
        
        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }
        
        tbody tr {
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
        }
        
        tbody tr:hover {
            background: #f9f9f9;
        }
        
        td {
            padding: 12px 15px;
            vertical-align: middle;
        }
        
        .product-images-preview {
            display: flex;
            gap: 5px;
        }
        
        .product-img-small {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .product-name {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .product-category {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .category-camisas {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .category-calcas {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        .stock-cell {
            font-weight: 600;
            font-size: 16px;
        }
        
        .stock-actions {
            display: flex;
            gap: 5px;
        }
        
        .table-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .table-btn.edit {
            background: #f39c12;
            color: white;
        }
        
        .table-btn.images {
            background: #3498db;
            color: white;
        }
        
        .table-btn.plus {
            background: #27ae60;
            color: white;
            width: 30px;
        }
        
        .table-btn.minus {
            background: #e74c3c;
            color: white;
            width: 30px;
        }
        
        .stock-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .stock-high {
            background: #27ae60;
        }
        
        .stock-medium {
            background: #f39c12;
        }
        
        .stock-low {
            background: #e74c3c;
        }
        
        .stock-out {
            background: #95a5a6;
        }
        
        .status-badge {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .status-instock {
            background: #d4edda;
            color: #155724;
        }
        
        .status-low {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-out {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* MODAL DE IMAGENS */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            padding: 20px;
            background: #000;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 12px 12px 0 0;
        }
        
        .modal-header h3 {
            font-size: 18px;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .images-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .gallery-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }
        
        .gallery-image:hover {
            border-color: #2196F3;
        }
        
        .gallery-image.active {
            border-color: #4CAF50;
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .form-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
        }
        
        .form-btn.save {
            background: #4CAF50;
            color: white;
        }
        
        .form-btn.cancel {
            background: #f5f5f5;
            color: #333;
        }
        
        /* NOTIFICA√á√ÉO */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #27ae60;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            display: none;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification.error {
            background: #e74c3c;
        }
        
        .notification.info {
            background: #3498db;
        }
        
        @media (max-width: 768px) {
            .simple-controls {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .images-container {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .images-gallery {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 13px;
            }
            
            .stock-actions {
                flex-direction: column;
            }
            
            .table-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <h1>
                    <span class="logo-icon">üì∏</span>
                    Gerenciador com M√∫ltiplas Imagens
                </h1>
                <p>JordanWearStore - Gerencie produtos com galeria de fotos</p>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- CONTROLES -->
        <div class="simple-controls">
            <button class="action-btn add" onclick="toggleAddProduct()">
                <span>‚ûï</span> Adicionar Produto
            </button>
            
            <button class="action-btn export" onclick="exportToJS()">
                <span>üíæ</span> Salvar C√≥digo JS
            </button>
            
            <button class="action-btn copy" onclick="copyToClipboard()">
                <span>üìã</span> Copiar C√≥digo
            </button>
            
            <button class="action-btn load" onclick="loadFromFile()">
                <span>üìÇ</span> Carregar Produtos
            </button>
        </div>
        
        <!-- FORMUL√ÅRIO ADICIONAR PRODUTO -->
        <div class="add-product-form" id="addProductForm">
            <h2 style="margin-bottom: 20px; color: #333;">‚ûï Adicionar Novo Produto</h2>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="newProductId">ID do Produto *</label>
                    <input type="text" id="newProductId" placeholder="Ex: camisa19 ou calca19">
                </div>
                
                <div class="form-group">
                    <label for="newProductName">Nome do Produto *</label>
                    <input type="text" id="newProductName" placeholder="Ex: Camisa Jordan Nova">
                </div>
                
                <div class="form-group">
                    <label for="newProductCategory">Categoria *</label>
                    <select id="newProductCategory">
                        <option value="camisas">Camisa</option>
                        <option value="calcas">Cal√ßa</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="newProductPrice">Pre√ßo (R$) *</label>
                    <input type="number" id="newProductPrice" min="0" step="0.01" placeholder="Ex: 299.90">
                </div>
                
                <div class="form-group">
                    <label for="newProductStock">Estoque *</label>
                    <input type="number" id="newProductStock" min="0" placeholder="Ex: 25">
                </div>
            </div>
            
            <!-- GERENCIADOR DE IMAGENS -->
            <div class="images-manager">
                <h4>üì∏ Galeria de Imagens</h4>
                
                <div class="form-group">
                    <label for="newProductImage">Imagem Principal *</label>
                    <input type="text" id="newProductImage" placeholder="https://exemplo.com/imagem-principal.jpg">
                    <small style="color: #666; display: block; margin-top: 5px;">Esta imagem aparecer√° na lista de produtos</small>
                </div>
                
                <div class="form-group">
                    <label>Imagens Adicionais</label>
                    <div class="images-container" id="additionalImagesContainer">
                        <!-- Imagens adicionais ser√£o inseridas aqui -->
                    </div>
                    
                    <div class="image-url-input">
                        <input type="text" id="newImageUrl" placeholder="Cole a URL de uma imagem">
                        <button type="button" onclick="addAdditionalImage()">Adicionar</button>
                    </div>
                    
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Adicione imagens extras que aparecer√£o na p√°gina de detalhes do produto
                    </small>
                </div>
            </div>
            
            <div class="form-group">
                <label for="newProductDescription">Descri√ß√£o *</label>
                <textarea id="newProductDescription" placeholder="Descri√ß√£o detalhada do produto..."></textarea>
            </div>
            
            <div class="form-actions">
                <button class="form-btn cancel" onclick="toggleAddProduct()">Cancelar</button>
                <button class="form-btn save" onclick="addNewProduct()">Salvar Produto</button>
            </div>
        </div>
        
        <!-- DASHBOARD -->
        <div class="dashboard-stats">
            <div class="stat-card">
                <h3>Total de Produtos</h3>
                <div class="stat-value" id="totalProducts">0</div>
            </div>
            <div class="stat-card">
                <h3>Camisas em Estoque</h3>
                <div class="stat-value" id="camisasStock">0</div>
            </div>
            <div class="stat-card">
                <h3>Cal√ßas em Estoque</h3>
                <div class="stat-value" id="calcasStock">0</div>
            </div>
            <div class="stat-card">
                <h3>Valor Total</h3>
                <div class="stat-value" id="totalValue">R$ 0,00</div>
            </div>
        </div>
        
        <!-- TABELA DE PRODUTOS -->
        <div class="products-table">
            <table>
                <thead>
                    <tr>
                        <th>Produto</th>
                        <th>Categoria</th>
                        <th>Pre√ßo</th>
                        <th>Estoque</th>
                        <th>Status</th>
                        <th>Imagens</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="productsTableBody">
                    <!-- Produtos ser√£o inseridos aqui -->
                </tbody>
            </table>
        </div>
        
        <!-- INFORMA√á√ïES -->
        <div style="text-align: center; color: #666; font-size: 14px; margin-top: 30px;">
            <p><strong>Como usar:</strong> Clique no bot√£o "Imagens" para gerenciar a galeria de fotos de cada produto.</p>
            <p>Os dados s√£o salvos automaticamente no seu navegador.</p>
        </div>
    </div>
    
    <!-- MODAL PARA GERENCIAR IMAGENS -->
    <div class="modal-overlay" id="imagesModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalProductName">Gerenciar Imagens</h3>
                <button class="close-modal" onclick="closeImagesModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Imagem Principal</label>
                    <input type="text" id="editMainImage" placeholder="URL da imagem principal">
                </div>
                
                <div class="form-group">
                    <label>Imagens Adicionais</label>
                    <div class="images-gallery" id="editImagesGallery">
                        <!-- Imagens ser√£o inseridas aqui -->
                    </div>
                    
                    <div class="image-url-input">
                        <input type="text" id="editImageUrl" placeholder="Cole a URL de uma imagem">
                        <button type="button" onclick="addImageToGallery()">Adicionar</button>
                    </div>
                    
                    <div style="margin-top: 20px; font-size: 13px; color: #666;">
                        <p><strong>Dica:</strong> Use imagens do Unsplash como:</p>
                        <p>‚Ä¢ Camisas: <code>https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=600&h=400&fit=crop</code></p>
                        <p>‚Ä¢ Cal√ßas: <code>https://images.unsplash.com/photo-1581349488280-6f2a3eb2a1f2?w=600&h=400&fit=crop</code></p>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button class="form-btn cancel" onclick="closeImagesModal()">Cancelar</button>
                    <button class="form-btn save" onclick="saveProductImages()">Salvar Imagens</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- NOTIFICA√á√ÉO -->
    <div class="notification" id="notification"></div>

    <script>
        // ============================================
        // SISTEMA COM M√öLTIPLAS IMAGENS
        // ============================================
        
        // Dados iniciais (com imagens extras)
        let produtos = [
            {
                id: 'camisa1',
                nome: 'Camisa Jordan Air Classic',
                categoria: 'camisas',
                preco: 299.90,
                estoque: 25,
                imagem: 'https://images.unsplash.com/photo-1520975922284-8b456906c813?w=300&h=300&fit=crop',
                imagens: [
                    'https://images.unsplash.com/photo-1520975922284-8b456906c813?w=600&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1523381140794-a1eef18a37c1?w=600&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1558769132-cb1f9c0c61ca?w=600&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?w=600&h=400&fit=crop'
                ],
                descricao: 'Cl√°ssica camisa Jordan com tecnologia Dry-Fit premium. Material: 100% poli√©ster tech. Dispon√≠vel em todas as cores.'
            },
            // ... (todos os outros produtos com imagens extras)
        ];
        
        let editingProductId = null;
        let currentAdditionalImages = [];
        
        // ============================================
        // FUN√á√ïES PRINCIPAIS
        // ============================================
        
        // INICIALIZAR
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì∏ Sistema com m√∫ltiplas imagens iniciado!');
            loadFromStorage();
            updateDashboard();
            renderProductsTable();
        });
        
        // SALVAR NO LOCALSTORAGE
        function saveToStorage() {
            try {
                localStorage.setItem('jordanwearstore_produtos', JSON.stringify(produtos));
            } catch(error) {
                console.error('Erro ao salvar:', error);
            }
        }
        
        // CARREGAR DO LOCALSTORAGE
        function loadFromStorage() {
            try {
                const saved = localStorage.getItem('jordanwearstore_produtos');
                if(saved) {
                    produtos = JSON.parse(saved);
                    showNotification('Dados carregados do armazenamento local', 'info');
                }
            } catch(error) {
                console.error('Erro ao carregar:', error);
            }
        }
        
        // ATUALIZAR DASHBOARD
        function updateDashboard() {
            const totalProducts = produtos.length;
            const camisasStock = produtos
                .filter(p => p.categoria === 'camisas')
                .reduce((sum, p) => sum + p.estoque, 0);
            const calcasStock = produtos
                .filter(p => p.categoria === 'calcas')
                .reduce((sum, p) => sum + p.estoque, 0);
            const totalValue = produtos
                .reduce((sum, p) => sum + (p.preco * p.estoque), 0);
            
            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('camisasStock').textContent = camisasStock;
            document.getElementById('calcasStock').textContent = calcasStock;
            document.getElementById('totalValue').textContent = `R$ ${totalValue.toFixed(2).replace('.', ',')}`;
        }
        
        // RENDERIZAR TABELA
        function renderProductsTable() {
            const tbody = document.getElementById('productsTableBody');
            let html = '';
            
            // Ordenar: camisas primeiro, depois cal√ßas
            const produtosOrdenados = [...produtos].sort((a, b) => {
                if(a.categoria !== b.categoria) {
                    return a.categoria === 'camisas' ? -1 : 1;
                }
                const numA = parseInt(a.id.replace(/\D/g, ''));
                const numB = parseInt(b.id.replace(/\D/g, ''));
                return numA - numB;
            });
            
            produtosOrdenados.forEach(produto => {
                const status = getStockStatus(produto.estoque);
                const statusClass = getStockClass(produto.estoque);
                const statusText = getStockText(produto.estoque);
                
                // Mostrar miniaturas das imagens
                const imagensPreview = produto.imagens ? produto.imagens.slice(0, 3) : [];
                
                html += `
                <tr>
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <img src="${produto.imagem}" alt="${produto.nome}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">
                            <div>
                                <div class="product-name">${produto.nome}</div>
                                <div style="font-size: 12px; color: #777;">ID: ${produto.id}</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="product-category category-${produto.categoria}">
                            ${produto.categoria === 'camisas' ? 'Camisa' : 'Cal√ßa'}
                        </span>
                    </td>
                    <td class="stock-cell">R$ ${produto.preco.toFixed(2).replace('.', ',')}</td>
                    <td class="stock-cell">${produto.estoque}</td>
                    <td>
                        <span class="stock-indicator ${statusClass}"></span>
                        <span class="status-badge status-${status}">${statusText}</span>
                    </td>
                    <td>
                        <div class="product-images-preview">
                            ${imagensPreview.map(img => `
                                <img src="${img}" alt="" class="product-img-small" 
                                     onerror="this.src='https://via.placeholder.com/40x40/cccccc/666666?text=IMG'">
                            `).join('')}
                            ${produto.imagens && produto.imagens.length > 3 ? 
                                `<div style="width: 40px; height: 40px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #666;">
                                    +${produto.imagens.length - 3}
                                </div>` : ''
                            }
                        </div>
                    </td>
                    <td>
                        <div class="stock-actions">
                            <button class="table-btn edit" onclick="editProduct('${produto.id}')">
                                Editar
                            </button>
                            <button class="table-btn images" onclick="manageProductImages('${produto.id}')">
                                üì∏ Imagens
                            </button>
                            <button class="table-btn plus" onclick="updateStock('${produto.id}', 1)">+</button>
                            <button class="table-btn minus" onclick="updateStock('${produto.id}', -1)">-</button>
                        </div>
                    </td>
                </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // GERENCIAR IMAGENS DO PRODUTO
        function manageProductImages(productId) {
            const produto = produtos.find(p => p.id === productId);
            if(!produto) return;
            
            editingProductId = productId;
            currentAdditionalImages = produto.imagens ? [...produto.imagens] : [];
            
            document.getElementById('modalProductName').textContent = `Imagens: ${produto.nome}`;
            document.getElementById('editMainImage').value = produto.imagem;
            
            renderImagesGallery();
            
            document.getElementById('imagesModal').classList.add('active');
        }
        
        // RENDERIZAR GALERIA DE IMAGENS
        function renderImagesGallery() {
            const gallery = document.getElementById('editImagesGallery');
            let html = '';
            
            currentAdditionalImages.forEach((img, index) => {
                html += `
                <div class="image-item">
                    <img src="${img}" alt="Imagem ${index + 1}" class="gallery-image"
                         onclick="selectImage(${index})">
                    <button type="button" class="remove-image" onclick="removeImage(${index})">√ó</button>
                </div>
                `;
            });
            
            gallery.innerHTML = html;
        }
        
        // ADICIONAR IMAGEM √Ä GALERIA
        function addImageToGallery() {
            const urlInput = document.getElementById('editImageUrl');
            const url = urlInput.value.trim();
            
            if(!url) {
                showNotification('Digite uma URL de imagem!', 'error');
                return;
            }
            
            if(!isValidImageUrl(url)) {
                showNotification('URL de imagem inv√°lida!', 'error');
                return;
            }
            
            currentAdditionalImages.push(url);
            renderImagesGallery();
            urlInput.value = '';
            
            showNotification('Imagem adicionada √† galeria!', 'success');
        }
        
        // REMOVER IMAGEM DA GALERIA
        function removeImage(index) {
            currentAdditionalImages.splice(index, 1);
            renderImagesGallery();
        }
        
        // SALVAR IMAGENS DO PRODUTO
        function saveProductImages() {
            if(!editingProductId) return;
            
            const produto = produtos.find(p => p.id === editingProductId);
            if(!produto) return;
            
            const mainImage = document.getElementById('editMainImage').value.trim();
            
            if(!mainImage) {
                showNotification('A imagem principal √© obrigat√≥ria!', 'error');
                return;
            }
            
            produto.imagem = mainImage;
            produto.imagens = currentAdditionalImages.filter(img => img !== mainImage);
            
            // Garantir que a imagem principal est√° no array de imagens
            if(!produto.imagens.includes(mainImage)) {
                produto.imagens.unshift(mainImage);
            }
            
            saveToStorage();
            renderProductsTable();
            closeImagesModal();
            
            showNotification('Imagens salvas com sucesso!', 'success');
        }
        
        // FECHAR MODAL DE IMAGENS
        function closeImagesModal() {
            document.getElementById('imagesModal').classList.remove('active');
            editingProductId = null;
            currentAdditionalImages = [];
        }
        
        // ADICIONAR PRODUTO
        function toggleAddProduct() {
            const form = document.getElementById('addProductForm');
            form.style.display = form.style.display === 'block' ? 'none' : 'block';
            
            if(form.style.display === 'block') {
                // Limpar formul√°rio
                document.getElementById('newProductId').value = '';
                document.getElementById('newProductName').value = '';
                document.getElementById('newProductCategory').value = 'camisas';
                document.getElementById('newProductPrice').value = '';
                document.getElementById('newProductStock').value = '10';
                document.getElementById('newProductImage').value = '';
                document.getElementById('newProductDescription').value = '';
                document.getElementById('newImageUrl').value = '';
                document.getElementById('additionalImagesContainer').innerHTML = '';
                
                // Gerar ID autom√°tico
                const categoria = document.getElementById('newProductCategory').value;
                const ids = produtos.filter(p => p.categoria === categoria).map(p => {
                    const num = p.id.replace(categoria.slice(0, -1), '');
                    return parseInt(num) || 0;
                });
                const nextId = ids.length > 0 ? Math.max(...ids) + 1 : 1;
                document.getElementById('newProductId').value = categoria.slice(0, -1) + nextId;
                
                // URL de imagem padr√£o baseada na categoria
                const defaultImage = categoria === 'camisas' 
                    ? 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=300&h=300&fit=crop'
                    : 'https://images.unsplash.com/photo-1581349488280-6f2a3eb2a1f2?w=300&h=300&fit=crop';
                
                document.getElementById('newProductImage').value = defaultImage;
                
                // Adicionar algumas imagens padr√£o
                const defaultImages = categoria === 'camisas' 
                    ? [
                        'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=600&h=400&fit=crop',
                        'https://images.unsplash.com/photo-1558769132-cb1f9c0c61ca?w=600&h=400&fit=crop',
                        'https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?w=600&h=400&fit=crop'
                    ]
                    : [
                        'https://images.unsplash.com/photo-1581349488280-6f2a3eb2a1f2?w=600&h=400&fit=crop',
                        'https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=600&h=400&fit=crop',
                        'https://images.unsplash.com/photo-1542272604-787c3835535d?w=600&h=400&fit=crop'
                    ];
                
                defaultImages.forEach(img => {
                    addImageToContainer(img);
                });
            }
        }
        
        // ADICIONAR IMAGEM AO CONTAINER NO FORMUL√ÅRIO
        function addImageToContainer(url) {
            const container = document.getElementById('additionalImagesContainer');
            const div = document.createElement('div');
            div.className = 'image-item';
            div.innerHTML = `
                <img src="${url}" alt="Imagem" style="width: 100%; height: 100px; object-fit: cover;">
                <button type="button" class="remove-image" onclick="this.parentElement.remove()">√ó</button>
            `;
            container.appendChild(div);
        }
        
        // ADICIONAR IMAGEM ADICIONAL NO FORMUL√ÅRIO
        function addAdditionalImage() {
            const urlInput = document.getElementById('newImageUrl');
            const url = urlInput.value.trim();
            
            if(!url) {
                showNotification('Digite uma URL de imagem!', 'error');
                return;
            }
            
            if(!isValidImageUrl(url)) {
                showNotification('URL de imagem inv√°lida!', 'error');
                return;
            }
            
            addImageToContainer(url);
            urlInput.value = '';
        }
        
        // ADICIONAR NOVO PRODUTO
        function addNewProduct() {
            const id = document.getElementById('newProductId').value.trim();
            const nome = document.getElementById('newProductName').value.trim();
            const categoria = document.getElementById('newProductCategory').value;
            const preco = parseFloat(document.getElementById('newProductPrice').value);
            const estoque = parseInt(document.getElementById('newProductStock').value);
            const imagem = document.getElementById('newProductImage').value.trim();
            const descricao = document.getElementById('newProductDescription').value.trim();
            
            // Coletar imagens adicionais
            const imageItems = document.querySelectorAll('#additionalImagesContainer .image-item img');
            const imagens = [];
            imageItems.forEach(img => {
                imagens.push(img.src);
            });
            
            // Valida√ß√£o
            if(!id || !nome || !categoria || isNaN(preco) || isNaN(estoque) || !imagem || !descricao) {
                showNotification('Preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }
            
            if(preco <= 0 || estoque < 0) {
                showNotification('Pre√ßo e estoque devem ser positivos!', 'error');
                return;
            }
            
            if(!isValidImageUrl(imagem)) {
                showNotification('URL da imagem principal inv√°lida!', 'error');
                return;
            }
            
            // Verificar se ID j√° existe
            if(produtos.some(p => p.id === id)) {
                showNotification('J√° existe um produto com este ID!', 'error');
                return;
            }
            
            // Adicionar novo produto
            produtos.push({
                id,
                nome,
                categoria,
                preco,
                estoque,
                imagem,
                imagens: [imagem, ...imagens].filter((v, i, a) => a.indexOf(v) === i), // Remover duplicatas
                descricao
            });
            
            // Ordenar produtos
            produtos.sort((a, b) => {
                if(a.categoria !== b.categoria) {
                    return a.categoria === 'camisas' ? -1 : 1;
                }
                const numA = parseInt(a.id.replace(/\D/g, ''));
                const numB = parseInt(b.id.replace(/\D/g, ''));
                return numA - numB;
            });
            
            // Salvar e atualizar
            saveToStorage();
            renderProductsTable();
            updateDashboard();
            toggleAddProduct();
            
            showNotification(`Produto "${nome}" adicionado com ${imagens.length + 1} imagens!`, 'success');
        }
        
        // EDITAR PRODUTO (estoque)
        function editProduct(productId) {
            const produto = produtos.find(p => p.id === productId);
            if(!produto) return;
            
            const novoEstoque = prompt(`Digite o novo estoque para "${produto.nome}":`, produto.estoque);
            if(novoEstoque === null) return;
            
            const estoqueNum = parseInt(novoEstoque);
            if(isNaN(estoqueNum) || estoqueNum < 0) {
                showNotification('Valor inv√°lido!', 'error');
                return;
            }
            
            produto.estoque = estoqueNum;
            saveToStorage();
            renderProductsTable();
            updateDashboard();
            showNotification(`Estoque atualizado para ${estoqueNum}`, 'success');
        }
        
        // ATUALIZAR ESTOQUE
        function updateStock(productId, change) {
            const produto = produtos.find(p => p.id === productId);
            if(!produto) return;
            
            const newStock = produto.estoque + change;
            
            if(newStock < 0) {
                showNotification('Estoque n√£o pode ser negativo!', 'error');
                return;
            }
            
            produto.estoque = newStock;
            saveToStorage();
            renderProductsTable();
            updateDashboard();
            
            const action = change > 0 ? 'aumentado' : 'reduzido';
            showNotification(`Estoque ${action} para ${newStock}`, 'success');
        }
        
        // EXPORTAR PARA JS
        function exportToJS() {
            try {
                // Separar por categoria
                const camisas = produtos.filter(p => p.categoria === 'camisas');
                const calcas = produtos.filter(p => p.categoria === 'calcas');
                
                // Gerar conte√∫do JS
                let jsContent = `const produtos = [
    // ======================================
    // CAMISAS - ${camisas.length} PRODUTOS
    // ======================================`;
                
                camisas.forEach((produto, index) => {
                    jsContent += `
    {
        id: '${produto.id}',
        nome: '${produto.nome}',
        categoria: '${produto.categoria}',
        preco: ${produto.preco},
        estoque: ${produto.estoque},
        imagem: '${produto.imagem}',
        imagens: ${JSON.stringify(produto.imagens || [produto.imagem])},
        descricao: '${(produto.descricao || '').replace(/'/g, "\\'")}'
    }${index < camisas.length - 1 ? ',' : ''}`;
                });
                
                jsContent += `,
    
    // ======================================
    // CAL√áAS - ${calcas.length} PRODUTOS
    // ======================================`;
                
                calcas.forEach((produto, index) => {
                    jsContent += `
    {
        id: '${produto.id}',
        nome: '${produto.nome}',
        categoria: '${produto.categoria}',
        preco: ${produto.preco},
        estoque: ${produto.estoque},
        imagem: '${produto.imagem}',
        imagens: ${JSON.stringify(produto.imagens || [produto.imagem])},
        descricao: '${(produto.descricao || '').replace(/'/g, "\\'")}'
    }${index < calcas.length - 1 ? ',' : ''}`;
                });
                
                jsContent += `
];`;
                
                // Criar arquivo para download
                const blob = new Blob([jsContent], { type: 'application/javascript' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `jordanwearstore-produtos-${new Date().toISOString().split('T')[0]}.js`;
                
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Arquivo JS salvo com m√∫ltiplas imagens!', 'success');
                
            } catch(error) {
                console.error('Erro ao exportar:', error);
                showNotification('Erro ao salvar arquivo!', 'error');
            }
        }
        
        // COPIAR C√ìDIGO PARA √ÅREA DE TRANSFER√äNCIA
        function copyToClipboard() {
            try {
                // Gerar c√≥digo JS
                const camisas = produtos.filter(p => p.categoria === 'camisas');
                const calcas = produtos.filter(p => p.categoria === 'calcas');
                
                let jsContent = `const produtos = [
    // ======================================
    // CAMISAS - ${camisas.length} PRODUTOS
    // ======================================`;
                
                camisas.forEach((produto, index) => {
                    jsContent += `
    {
        id: '${produto.id}',
        nome: '${produto.nome}',
        categoria: '${produto.categoria}',
        preco: ${produto.preco},
        estoque: ${produto.estoque},
        imagem: '${produto.imagem}',
        imagens: ${JSON.stringify(produto.imagens || [produto.imagem])},
        descricao: '${(produto.descricao || '').replace(/'/g, "\\'")}'
    }${index < camisas.length - 1 ? ',' : ''}`;
                });
                
                jsContent += `,
    
    // ======================================
    // CAL√áAS - ${calcas.length} PRODUTOS
    // ======================================`;
                
                calcas.forEach((produto, index) => {
                    jsContent += `
    {
        id: '${produto.id}',
        nome: '${produto.nome}',
        categoria: '${produto.categoria}',
        preco: ${produto.preco},
        estoque: ${produto.estoque},
        imagem: '${produto.imagem}',
        imagens: ${JSON.stringify(produto.imagens || [produto.imagem])},
        descricao: '${(produto.descricao || '').replace(/'/g, "\\'")}'
    }${index < calcas.length - 1 ? ',' : ''}`;
                });
                
                jsContent += `
];`;
                
                // Copiar para √°rea de transfer√™ncia
                navigator.clipboard.writeText(jsContent)
                    .then(() => {
                        showNotification('C√≥digo copiado para a √°rea de transfer√™ncia!', 'success');
                    })
                    .catch(err => {
                        // M√©todo alternativo
                        const textArea = document.createElement('textarea');
                        textArea.value = jsContent;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        showNotification('C√≥digo copiado!', 'success');
                    });
                    
            } catch(error) {
                console.error('Erro ao copiar:', error);
                showNotification('Erro ao copiar c√≥digo!', 'error');
            }
        }
        
        // CARREGAR DE ARQUIVO
        function loadFromFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.js,.json,.txt';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        let novosProdutos = [];
                        const content = e.target.result;
                        
                        // Verificar se √© JS
                        if (content.includes('const produtos = [')) {
                            // Extrair array do JS
                            const match = content.match(/const produtos = (\[[\s\S]*?\]);/);
                            if (match && match[1]) {
                                const tempFunc = new Function('return ' + match[1]);
                                novosProdutos = tempFunc();
                            }
                        } else {
                            // Tentar como JSON
                            novosProdutos = JSON.parse(content);
                            if (novosProdutos.produtos) {
                                novosProdutos = novosProdutos.produtos;
                            }
                        }
                        
                        if (!Array.isArray(novosProdutos) || novosProdutos.length === 0) {
                            throw new Error('Formato inv√°lido');
                        }
                        
                        // Garantir que todos tenham array de imagens
                        novosProdutos.forEach(p => {
                            if (!p.imagens && p.imagem) {
                                p.imagens = [p.imagem];
                            }
                        });
                        
                        // Atualizar produtos
                        produtos = novosProdutos;
                        saveToStorage();
                        renderProductsTable();
                        updateDashboard();
                        
                        showNotification(`${produtos.length} produtos carregados!`, 'success');
                        
                    } catch(error) {
                        console.error('Erro:', error);
                        showNotification('Arquivo inv√°lido!', 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // ============================================
        // FUN√á√ïES AUXILIARES
        // ============================================
        
        function isValidImageUrl(url) {
            return url.startsWith('http') && (url.includes('.jpg') || url.includes('.jpeg') || url.includes('.png') || url.includes('.webp'));
        }
        
        function getStockStatus(estoque) {
            if (estoque === 0) return 'out';
            if (estoque <= 3) return 'low';
            if (estoque <= 10) return 'medium';
            return 'instock';
        }
        
        function getStockClass(estoque) {
            if (estoque === 0) return 'stock-out';
            if (estoque <= 3) return 'stock-low';
            if (estoque <= 10) return 'stock-medium';
            return 'stock-high';
        }
        
        function getStockText(estoque) {
            if (estoque === 0) return 'ESGOTADO';
            if (estoque <= 3) return 'BAIXO';
            if (estoque <= 10) return 'M√âDIO';
            return 'EM ESTOQUE';
        }
        
        function showNotification(message, type = 'success') {
            const el = document.getElementById('notification');
            el.textContent = message;
            el.className = 'notification ' + type;
            el.style.display = 'flex';
            
            setTimeout(() => {
                el.style.display = 'none';
            }, 3000);
        }
        
        // SALVAR AUTOMATICAMENTE AO SAIR
        window.addEventListener('beforeunload', function() {
            saveToStorage();
        });
    </script>
</body>
</html>
